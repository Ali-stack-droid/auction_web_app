{"version":3,"file":"static/js/163.5293d921.chunk.js","mappings":"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","sources":["components/live-streaming/LiveStreaming.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport {\r\n    Box,\r\n    Fade,\r\n    Container,\r\n    Grid,\r\n    CircularProgress,\r\n} from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport CustomDialogue from '../custom-components/CustomDialogue';\r\nimport AuctionCard from '../auction/auction-components/AuctionCard';\r\nimport AuctionHeader from '../auction/auction-components/AuctionHeader';\r\nimport PaginationButton from '../auction/auction-components/PaginationButton';\r\nimport { deleteAuction, getCurrentLiveAuctions } from '../Services/Methods';\r\nimport NoRecordFound from '../../utils/NoRecordFound';\r\nimport { ErrorMessage, SuccessMessage } from '../../utils/ToastMessages';\r\n\r\n\r\nconst LiveStreaming = () => {\r\n    const [isCurrentAuction, setIsCurrentAuction] = useState(true); // Toggle between Current and Past Auctions\r\n    const [selectedLocation, setSelectedLocation]: any = useState(null); // Filter by location\r\n    const [fadeIn, setFadeIn] = useState(false); // Fade control state\r\n    const [confirmDelete, setConfirmDelete] = useState(false);\r\n    const [deleteAuctionId, setDeleteAuctionId] = useState<string | null>(null);\r\n\r\n    const [isFetchingData, setIsFetchingData] = useState(false);\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n    const [filteredData, setFilteredData] = useState([]); // Filtered data state\r\n    const [paginationedData, setPaginationedData]: any = useState([]); // Filtered data state\r\n\r\n\r\n    useEffect(() => {\r\n        if (!isFetchingData) {\r\n            setIsFetchingData(true)\r\n            fetchLiveStreamingData();\r\n        }\r\n    }, [isCurrentAuction])\r\n\r\n    const fetchLiveStreamingData = async () => {\r\n        try {\r\n            const response = await getCurrentLiveAuctions()\r\n            if (response.data && response.data.length > 0) {\r\n                const updatedData = response.data.map((item: any) => ({\r\n                    id: item.Id,\r\n                    name: item.Name,\r\n                    image: item.Image,\r\n                    description: item.Description,\r\n                    isLive: item.LiveStreaming,\r\n                    details: {\r\n                        address: item.Address,\r\n                        location: `${item.City}, ${item.Country}`,\r\n                        dateRange: `${item.StartDate} to ${item.EndDate}`,\r\n                        lotsAvailable: item.TotalLots\r\n                    }\r\n                }));\r\n\r\n                setFilteredData(updatedData);\r\n                setPaginationedData(updatedData)\r\n            } else {\r\n                setFilteredData([]);\r\n                setPaginationedData([])\r\n            }\r\n            setIsFetchingData(false)\r\n\r\n        } catch (error) {\r\n            setIsFetchingData(false)\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        try {\r\n            // Call the delete API\r\n            const response: any = await deleteAuction(id);\r\n            if (response.status === 200) {\r\n                SuccessMessage('Auction deleted successfully!')\r\n                // Update state with filtered data if API call is successful\r\n                const updatedData = filteredData.filter((auction: any) => auction.id !== id);\r\n                setFilteredData(updatedData);\r\n            } else {\r\n                ErrorMessage('Error deleting auction!')\r\n            }\r\n        } catch (error) {\r\n        } finally {\r\n            handleCloseModal();\r\n        }\r\n    };\r\n\r\n\r\n    // Open confirmation modal\r\n    const handleDeleteAuction = (id: string) => {\r\n        setDeleteAuctionId(id);\r\n        setConfirmDelete(true);\r\n    };\r\n\r\n    // Close modal\r\n    const handleCloseModal = () => {\r\n        if (!isDeleting) {\r\n            setIsDeleting(false)\r\n            setConfirmDelete(false);\r\n            setDeleteAuctionId(null);\r\n        }\r\n    };\r\n\r\n    // Confirm deletion\r\n    const handleConfirmDelete = () => {\r\n        if (deleteAuctionId && !isDeleting) {\r\n            setIsDeleting(true)\r\n            handleDelete(deleteAuctionId); // Call the delete handler\r\n        }\r\n    };\r\n\r\n    const navigate = useNavigate()\r\n\r\n    // Handle Edit\r\n    const handleEdit = (id: string) => {\r\n        navigate(`/auction/edit?aucId=${id}`);\r\n    };\r\n\r\n    // Filtered Data based on `type` and `location`\r\n    useEffect(() => {\r\n\r\n        setFadeIn(false); // Trigger fade-out\r\n        setTimeout(() => {\r\n            setFadeIn(true); // Trigger fade-in after filtering\r\n            // setFilteredData(liveStreamData);\r\n        }, 200);\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <Box sx={{ padding: 2 }}>\r\n            <AuctionHeader\r\n                headerType={\"live\"}\r\n                isCurrent={isCurrentAuction}\r\n                onToggle={() => setIsCurrentAuction((prev) => !prev)}\r\n                selectedLocation={selectedLocation}\r\n                setSelectedLocation={setSelectedLocation}\r\n                locations={[]}\r\n            />\r\n            <Box sx={{ minHeight: \"70vh\" }}>\r\n                {!isFetchingData && paginationedData?.length ?\r\n                    <Fade in={fadeIn} timeout={200}>\r\n                        <Container disableGutters maxWidth={false} sx={{ mt: 3 }}>\r\n                            <Grid container spacing={3}>\r\n                                {paginationedData &&\r\n                                    paginationedData.map((auction: any) => (\r\n                                        <Grid item xs={12} sm={6} md={4} xl={3} key={auction.id}>\r\n                                            <AuctionCard\r\n                                                headerType={\"live\"}\r\n                                                cardData={auction}\r\n                                                handleEdit={handleEdit}\r\n                                                handleDelete={() => handleDeleteAuction(auction.id)}\r\n                                                handleMoveModal={() => { }}\r\n                                            />\r\n                                        </Grid>\r\n                                    ))}\r\n                            </Grid>\r\n                        </Container>\r\n                    </Fade>\r\n\r\n                    : isFetchingData ?\r\n                        <Box\r\n                            sx={{\r\n                                display: 'flex',\r\n                                justifyContent: 'center',\r\n                                alignItems: 'center',\r\n                                height: '70vh',\r\n                                width: '100%',\r\n                            }}\r\n                        >\r\n                            <CircularProgress size={70} disableShrink />\r\n                        </Box>\r\n                        :\r\n                        <NoRecordFound />\r\n                }\r\n            </Box>\r\n\r\n            <PaginationButton filteredData={filteredData} setPaginationedData={setPaginationedData} />\r\n\r\n            {/* Confirmation Modal */}\r\n            <CustomDialogue\r\n                type={\"delete\"}\r\n                title={\"Confirm Deletion\"}\r\n                message={\"Are you sure you want to delete this auction? This action cannot be undone.\"}\r\n                openDialogue={confirmDelete}\r\n                handleCloseModal={handleCloseModal}\r\n                handleConfirmModal={handleConfirmDelete}\r\n                isDeleting={isDeleting}\r\n            />\r\n\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default LiveStreaming;\r\n"],"names":["LiveStreaming","isCurrentAuction","setIsCurrentAuction","useState","selectedLocation","setSelectedLocation","fadeIn","setFadeIn","confirmDelete","setConfirmDelete","deleteAuctionId","setDeleteAuctionId","isFetchingData","setIsFetchingData","isDeleting","setIsDeleting","filteredData","setFilteredData","paginationedData","setPaginationedData","useEffect","fetchLiveStreamingData","async","response","getCurrentLiveAuctions","data","length","updatedData","map","item","id","Id","name","Name","image","Image","description","Description","isLive","details","address","Address","location","concat","City","Country","dateRange","StartDate","EndDate","lotsAvailable","TotalLots","error","handleCloseModal","navigate","useNavigate","handleEdit","setTimeout","_jsxs","Box","sx","padding","children","_jsx","AuctionHeader","headerType","isCurrent","onToggle","prev","locations","minHeight","Fade","in","timeout","Container","disableGutters","maxWidth","mt","Grid","container","spacing","auction","xs","sm","md","xl","AuctionCard","cardData","handleDelete","handleDeleteAuction","handleMoveModal","display","justifyContent","alignItems","height","width","CircularProgress","size","disableShrink","NoRecordFound","PaginationButton","CustomDialogue","type","title","message","openDialogue","handleConfirmModal","handleConfirmDelete","deleteAuction","status","SuccessMessage","filter","ErrorMessage"],"sourceRoot":""}